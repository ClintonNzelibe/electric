{% extends "admin/admin_base.html" %}

{% block content %}

<div class="container mt-4">
    <h2 class="mb-4">Website Settings</h2>
    {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="container mt-3">
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

   <form action="{{ url_for('admin.update_settings') }}" method="POST" enctype="multipart/form-data">

        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <div class="row">
            <!-- Company Identity -->
            <div class="col-md-6">
                <h4>Company Identity</h4>

                <div class="form-group mb-3">
                    <label>Company Name</label>
                    <input type="text" name="company_name" class="form-control"
                           value="{{ settings.company_name }}">
                </div>

                <div class="form-group mb-3">
                    <label>Slogan</label>
                    <input type="text" name="slogan" class="form-control"
                           value="{{ settings.slogan }}">
                </div>

                <div class="form-group mb-3">
                    <label>About Text</label>
                    <textarea name="about_text" class="form-control" rows="5">{{ settings.about_text }}</textarea>
                </div>
            </div>

            <!-- Contact Information -->
            <div class="col-md-6">
                <h4>Contact Information</h4>

                <div class="form-group mb-3">
                    <label>Phone</label>
                    <input type="text" name="phone" class="form-control"
                           value="{{ settings.phone }}">
                </div>

                <div class="form-group mb-3">
                    <label>Alternate Phone</label>
                    <input type="text" name="phone_alt" class="form-control"
                           value="{{ settings.phone_alt }}">
                </div>

                <div class="form-group mb-3">
                    <label>Email</label>
                    <input type="email" name="email" class="form-control"
                           value="{{ settings.email }}">
                </div>

                <div class="form-group mb-3">
                    <label>Address</label>
                    <input type="text" name="address" class="form-control"
                           value="{{ settings.address }}">
                </div>

                <div class="form-group mb-3">
                    <label>WhatsApp Number</label>
                    <input type="text" name="whatsapp_number" class="form-control"
                           value="{{ settings.whatsapp_number }}">
                </div>
            </div>
        </div>

        <hr>

        <!-- Social Media -->
        <h4 class="mt-3">Social Media</h4>

        <div class="row">
            <div class="col-md-6">
                <div class="form-group mb-3">
                    <label>Facebook</label>
                    <input type="text" name="facebook" class="form-control"
                           value="{{ settings.facebook }}">
                </div>

                <div class="form-group mb-3">
                    <label>Instagram</label>
                    <input type="text" name="instagram" class="form-control"
                           value="{{ settings.instagram }}">
                </div>
            </div>

            <div class="col-md-6">
                <div class="form-group mb-3">
                    <label>Twitter</label>
                    <input type="text" name="twitter" class="form-control"
                           value="{{ settings.twitter }}">
                </div>

                <div class="form-group mb-3">
                    <label>YouTube</label>
                    <input type="text" name="youtube" class="form-control"
                           value="{{ settings.youtube }}">
                </div>
            </div>
        </div>

        <hr>

        <!-- Branding -->
        <h4 class="mt-3">Branding (Logo & Homepage Hero Image)</h4>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label>Current Logo:</label><br>
                {% if settings.logo_filename %}
                    <img src="{{ url_for('static', filename='uploads/' ~ settings.logo_filename) }}"
                         width="120" class="mb-2">
                {% else %}
                    <p>No logo uploaded.</p>
                {% endif %}

                <input type="file" name="logo" class="form-control mt-2">
            </div>

            <div class="col-md-6 mb-3">
                <label>Current Hero Image:</label><br>
                {% if settings.hero_image_filename %}
                    <img src="{{ url_for('static', filename='uploads/' ~ settings.hero_image_filename) }}"
                         width="200" class="mb-2">
                {% else %}
                    <p>No hero image uploaded.</p>
                {% endif %}

                <input type="file" name="hero_image" class="form-control mt-2">
            </div>
        </div>

        <button class="btn btn-primary mt-4" type="submit">Save Settings</button>

    </form>
</div>

{% endblock %}
