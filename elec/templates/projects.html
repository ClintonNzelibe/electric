{% extends "base.html" %}
{% block content %}

<style>
/* Background section matching your app theme */
.projects-section {
    background: linear-gradient(180deg, #f5f7fb, #e9eef5);
    padding: 70px 20px;
    border-radius: 14px;
}

/* Section title */
.projects-title {
    color: var(--primary);
    font-weight: 700;
    text-align: center;
    font-size: 34px;
    margin-bottom: 10px;
}

/* Project subtitle */
.projects-subtitle {
    max-width: 620px;
    margin: 0 auto;
    text-align: center;
    color: #425466;
    font-size: 16px;
}

/* Project card */
.project-card {
    background: #ffffff;
    border-radius: 14px;
    overflow: hidden;
    border: 1px solid #d8dce3;
    box-shadow: 0 5px 20px rgba(0,0,0,0.06);
    transition: transform .25s ease, box-shadow .25s ease;
}

.project-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 10px 26px rgba(0,0,0,0.10);
}

/* Project images container */
.project-images {
    display: flex;
    height: 220px;
}

.project-images div {
    flex: 1;
    overflow: hidden;
    cursor: pointer;
}

.project-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform .35s ease;
}

.project-img:hover {
    transform: scale(1.07);
}

/* If no image */
.no-image-box {
    background:#eef2f6;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:13px;
    color:#555;
}

/* Lightbox */
#lightbox {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.88);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
}

#lightbox img {
    max-width: 90%;
    max-height: 90%;
    border-radius: 10px;
    box-shadow: 0 0 25px rgba(255,255,255,0.25);
    animation: zoomIn .25s ease;
}

@keyframes zoomIn {
    from { opacity: 0; transform: scale(0.9); }
    to { opacity: 1; transform: scale(1); }
}

/* Responsive tweaks */
@media (max-width: 768px) {
    .project-images {
        flex-direction: column;
        height: auto;
    }

    .project-images div {
        height: 180px;
    }
}
</style>


<!-- LIGHTBOX -->
<div id="lightbox" onclick="closeLightbox()">
    <img id="lightbox-img">
</div>

<section class="projects-section">

    <h1 class="projects-title">Our Projects</h1>
    <p class="projects-subtitle">
        Explore some of our completed work across Electrical, Solar, CCTV, and Interior Decoration.
    </p>

    <div class="row mt-5 g-4">
        {% for project in projects %}
        <div class="col-12 col-md-6 col-lg-4">

            <div class="project-card">

                <!-- Project Title -->
                <div class="p-3">
                    <h5 class="mb-1 text-primary">{{ project.title }}</h5>
                    <p class="text-muted" style="font-size:14px;">
                        {{ project.category }}
                        {% if project.location %}
                        â€¢ {{ project.location }}
                        {% endif %}
                    </p>
                </div>

                <!-- Images -->
                <div class="project-images">
                    {% if project.before_image %}
                    <div onclick="openLightbox('{{ url_for('static', filename='uploads/' ~ project.before_image) }}')">
                        <img src="{{ url_for('static', filename='uploads/' ~ project.before_image) }}" class="project-img">
                    </div>
                    {% else %}
                    <div class="no-image-box">No Before Image</div>
                    {% endif %}

                    {% if project.after_image %}
                    <div onclick="openLightbox('{{ url_for('static', filename='uploads/' ~ project.after_image) }}')" style="margin-left:2px;">
                        <img src="{{ url_for('static', filename='uploads/' ~ project.after_image) }}" class="project-img">
                    </div>
                    {% else %}
                    <div class="no-image-box" style="margin-left:2px;">No After Image</div>
                    {% endif %}
                </div>

                <!-- Description -->
                <div class="p-3">
                    <p style="font-size:14px; color:#333;">
                        {{ project.description[:100] }}{% if project.description|length > 100 %}...{% endif %}
                    </p>
                </div>

            </div>

        </div>
        {% endfor %}
    </div>

</section>

<script>
function openLightbox(src) {
    document.getElementById('lightbox-img').src = src;
    document.getElementById('lightbox').style.display = 'flex';
}
function closeLightbox() {
    document.getElementById('lightbox').style.display = 'none';
}
</script>

{% endblock %}
